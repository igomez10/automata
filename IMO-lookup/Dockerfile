FROM python:3.7-slim

ADD . .
RUN pip install -r requirements.txt

ARG _BASE_URL
ENV _BASE_URL $_BASE_URL

ARG _AIRTABLE_API_KEY
ENV _AIRTABLE_API_KEY $_AIRTABLE_API_KEY

ARG _AIRTABLE_BASE_ID
ENV _AIRTABLE_BASE_ID $_AIRTABLE_BASE_ID

ARG PROJECT_ID
ENV PROJECT_ID $PROJECT_ID

ARG _SUB_PUB_TOPIC_NAME
ENV _SUB_PUB_TOPIC_NAME $_SUB_PUB_TOPIC_NAME

CMD [ "python", "-u", "./main.py" ]